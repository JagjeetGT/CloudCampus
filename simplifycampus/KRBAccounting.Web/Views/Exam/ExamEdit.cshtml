@model KRBAccounting.Web.ViewModels.Academy.AcademicsExamAddViewModel
<script src="@Url.Content("~/Scripts/jquery.validate.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.js")" type="text/javascript"></script>
@*@{
   
    var Startdate = Model.StartDate.ToString("dd/MM/yyyy");
    var Enddate = Model.EndDate.ToString("dd/MM/yyyy");
}*@
@{


    var placeholder = "MM/DD/YYYY";
    var miti = "";
    if (Model.SystemControl.DateType == 2)
    {
        miti = "(Miti)";
         placeholder = "yyyy/mm/dd";
     }
}
@using (Ajax.BeginForm("ExamEdit", "Exam", new { controller = "School" }, new AjaxOptions { HttpMethod = "Post", OnSuccess = "successEdit" }, new { @class = "form-horizontal from-custom online-form", id = "form-id" }))
{
    @Html.HiddenFor(x => x.ScExam.Id)
    <div class="lag">
        <label class="label-90">
            Description</label>
        <div class="field">
            @Html.TextBoxFor(m => m.ScExam.Description, new { @class = "input-215 input", entermsg = "Enter Description" })
            @Html.ValidationMessageFor(m => m.ScExam.Description)
        </div>
        <label class="label-90">
            Code</label>
        <div class="field">
            @Html.TextBoxFor(m => m.ScExam.Code, new { @class = "input-120 input", entermsg = "Enter Description" })
            @Html.ValidationMessageFor(m => m.ScExam.Code)
        </div>
    </div>

    
    <div class="clearfix">
    </div>
    
    <div class="lag">
         <span class="stack">
            <label class="label-90">
               Start Date 
                @miti
                
                
            </label>
            <span class="field">@*  @Html.HiddenFor(x => x.DBOMiti)
                                        @Html.HiddenFor(x => x.DBO, new { displayId = "DBODisplay" })
                                       @Html.TextBoxFor(x => x.DBODisplay, new { @class = "input-190 input", miti = Model.SystemControl.DateType, dateId = "DBO", displayId = "DBODisplay", mitiId = "DBOMiti" })*@
                @Html.TextBoxFor(x => x.DisplayStartDate, new { @class = "input-187", @placeholder = placeholder })
                @Html.ValidationMessageFor(x => x.DisplayStartDate)
            </span></span>
            <span class="stack">
            <label class="label-90">
               End Date 
            @miti
                
                
                </label>
            <span class="field">@*  @Html.HiddenFor(x => x.DBOMiti)
                                        @Html.HiddenFor(x => x.DBO, new { displayId = "DBODisplay" })
                                       @Html.TextBoxFor(x => x.DBODisplay, new { @class = "input-190 input", miti = Model.SystemControl.DateType, dateId = "DBO", displayId = "DBODisplay", mitiId = "DBOMiti" })*@
                @Html.TextBoxFor(x => x.DisplayEndDate, new { @class = "input-187", @placeholder = placeholder })
                @Html.ValidationMessageFor(x => x.DisplayEndDate)
            </span></span>
        @*  <label class="label-90">
            Start Date</label>
        <div class="field">
            <span>
                @Html.HiddenFor(m => m.ScExam.StartMiti)
                @Html.HiddenFor(m => m.StartDate, new { displayId = "DisplayStartDate" })
                @Html.TextBoxFor(m => m.DisplayStartDate, new { @class = "input-170 input", entermsg = "Enter Voucher Date.", miti = Model.SystemControl.DateType, dateId = "StartDate", displayId = "DisplayStartDate", mitiId = "ScExam_StartMiti" })
                @Html.ValidationMessageFor(m => m.StartDate)
                <input type="hidden" id="currStartDate" value="@Startdate"/></span>
        </div>
        <label class="label-90">
            End Date</label>
        <div class="field">
            <span>
                @Html.HiddenFor(m => m.ScExam.EndMiti)
                @Html.HiddenFor(m => m.EndDate, new { displayId = "DisplayEndDate" })
                @Html.TextBoxFor(m => m.DisplayEndDate, new { @class = "input-170 input", entermsg = "Enter Voucher Date.", miti = Model.SystemControl.DateType, dateId = "EndDate", displayId = "DisplayEndDate", mitiId = "ScExam_EndMiti" })
                @Html.ValidationMessageFor(m => m.EndDate)
                <input type="hidden" id="currEndDate" value="@Enddate"/></span>
        </div>*@
    </div>  <div class="clearfix">
    </div>
    <div class="lag">
        <label class="label-90">
            Schedule</label>
        <div class="field">
            @Html.TextBoxFor(m => m.ScExam.Schedule, new { @class = "input-170 input", entermsg = "Enter Schedule" })
            @Html.ValidationMessageFor(m => m.ScExam.Schedule)
        </div>
        <div class="clearfix"></div>
        <label class="label-90">
            Exam Type</label>
        <div class="field">
            @Html.DropDownListFor(x => x.ScExam.Type, Model.ExamType, new { @class = "input-170 input", entermsg = "Enter Exam Type" })
            @Html.ValidationMessageFor(m => m.ScExam.Type)
        </div>
        <label class="label-90">
            Is Final</label>
        <div class="field">
            @Html.EditorFor(x => x.ScExam.IsFinal)
            @Html.ValidationMessageFor(m => m.ScExam.IsFinal)
        </div>
    </div> 
       

    <div class="clearfix">
    </div>


    <div class="lag">
        <label class="label-90">
            Memo</label>
        <div class="field">
            @Html.TextBoxFor(m => m.ScExam.Memo, new { @class = "input-450 input", entermsg = "Enter Remarks" })
            @Html.ValidationMessageFor(m => m.ScExam.Memo)
        </div>
    </div>
}
<script type="text/javascript">

//    $(document).ready(function() {

//  
//    var dateType = @Model.SystemControl.DateType;
//    var nepstartDate;
//          var nependDate;
//        startdate = $("#currStartDate").val();
//        enddate = $("#currEndDate").val();
//    if(dateType==1) {
//        nepstartDate = convertToNepali(startdate);
//        nependDate = convertToNepali(enddate);
//    } else {
//        startdate = convertToNepali(startdate);
//          enddate = convertToNepali(enddate);
//        nepstartDate = startdate;
//        nependDate = enddate;
//    }
//    $("#ScExam_StartMiti").val(nepstartDate);
//    $("#DisplayStartDate").val(startdate);
//       $("#StartDate").nepDateTimePicker(); 


//        $("#ScExam_EndMiti").val(nependDate);
//    $("#DisplayEndDate").val(enddate);
//    
//        $("#EndDate").nepDateTimePicker();
//  });
     //$("#DisplayStartDate").val("");
    //$("#DisplayEndDate").val("");
    
    var dateType = @Model.SystemControl.DateType;
    if(dateType==1) {
        
        $( "#DisplayEndDate, #DisplayStartDate").mask("99/99/9999");
           $( "#DisplayEndDate, #DisplayStartDate").live("blur", function() {
                var validDate = isDate($(this).val(),"/",1,0,2);
                if(!validDate) {
            $($(this).addClass("error"));
        }
            else {
            $($(this).removeClass("error"));
            }
            });
        }
       
        else {
                  $( "#DisplayEndDate, #DisplayStartDate").mask("9999/99/99");
                  $( "#DisplayEndDate, #DisplayStartDate").live("blur", function() {
      
                var date = $(this).val();
     
                var validDate=isNepaliDate(date);
                if(!validDate) {
                $($(this).addClass("error"));
                }
                else {
                $($(this).removeClass("error"));
                }
                });
                }
</script>
