@model KRBAccounting.Web.ViewModels.Management.BranchViewModel
<script src="@Url.Content("~/Scripts/jquery.validate.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.js")" type="text/javascript"></script>
@{
    var date = Model.Branch.StartDate.ToString("dd/MM/yyyy");
}
<div class="workplace">
    <div class="row-fluid">
        <div class="span12">
            <div class="head">
                <div class="isw-grid">
                </div>
                <h1>
                    Branch Setting</h1>
                    <ul class="buttons">
                    <li><a class="isw-left_circle" title="Back" href="javascript: history.go(-1)"></a>
                    </li>
                </ul>
                <div class="clear">
                </div>
            </div>
            @using (Html.BeginForm("BranchEdit", "Management", FormMethod.Post, new { @class = "form-horizontal form-custom", id = "branch-form" }))
            {
                <div>
                    <div id="MsgError">
                    </div>
                    @Html.HiddenFor(x=>x.Branch.Id)
                    @Html.HiddenFor(x=>x.Branch.ParentId)
                 
                    @Html.HiddenFor(x=>x.Branch.CreatedDate)
                    @Html.HiddenFor(x=>x.Branch.StartDate)
                    @Html.HiddenFor(x=>x.Branch.EndDate)
                    <div class="lag">
                        <span class="stack">
                            <label class="label-100">
                                Name</label>
                            <span class="field">
                                @Html.TextBoxFor(m => m.Branch.Name, new { @class = "input-245 input" })
                                @Html.ValidationMessageFor(m => m.Branch.Name)
                            </span>
                        </span>
                        <span class="stack">
                            <label class="label-100">Start Date</label>
                            <span class="field">
                                @Html.HiddenFor(m => m.Branch.StartMiti)
                                @Html.HiddenFor(m => m.Branch.StartDate, new { displayId = "Branch_DisplayDate" })
                                @Html.TextBoxFor(m => m.Branch.DisplayDate, new
                                                      {
                                                          @class = "input-90 input",
                                                          entermsg = "Enter Date.",
                                                          miti = Model.SystemControl.DateType,
                                                          dateId = "Branch_StartDate",
                                                          displayId = "Branch_DisplayDate",
                                                          mitiId = "Branch_StartMiti"
                                                      })
                                @Html.ValidationMessageFor(m => m.Branch.StartDate)
                                <input type="hidden" id="currDate" value="@date"/>
                            </span>
                            </span>
                    </div>
                    <div class="lag">
                        <span class="stack">
                            <label class="label-100">
                                Country</label>
                            <span class="field">
                                @Html.TextBoxFor(m => m.Branch.Country, new { @class = "input-245 input" })
                                @Html.ValidationMessageFor(m => m.Branch.Country)
                            </span>
                        </span>
                        <span class="stack">
                            <label class="label-100">State</label>
                            <span class="field">
                                @Html.TextBoxFor(m => m.Branch.State, new { @class = "input-245 input" })
                                @Html.ValidationMessageFor(m => m.Branch.State)
                            </span>
                            </span>
                    </div>
                    <div class="lag">
                        <span class="stack">
                            <label class="label-100">City</label>
                            <span class="field">
                                @Html.TextBoxFor(m => m.Branch.City, new { @class = "input-245 input" })
                                @Html.ValidationMessageFor(m => m.Branch.City)
                            </span>
                        </span>
                        <span class="stack">
                            <label class="label-100">
                                Address</label>
                            <span class="field">
                                @Html.TextBoxFor(m => m.Branch.Address, new { @class = "input-245 input" })
                                @Html.ValidationMessageFor(m => m.Branch.Address)
                            </span>
                        </span>
                    </div>
                    <div class="lag">
                        <span class="stack">
                            <label class="label-100">Phone No</label>
                            <span class="field">
                                @Html.TextBoxFor(m => m.Branch.PhoneNo, new { @class = "input-245 input" })
                                @Html.ValidationMessageFor(m => m.Branch.PhoneNo)
                            </span>
                        </span>
                        <span class="stack">
                            <label class="label-100">
                                Fax</label>
                            <span class="field">
                                @Html.TextBoxFor(m => m.Branch.Fax, new { @class = "input-245 input" })
                                @Html.ValidationMessageFor(m => m.Branch.Fax)
                            </span>
                        </span>
                    </div>
                    <div class="clearfix"></div>
                    <input type="submit" value="Save Changes" class="btn btn-info"/>
                </div>
            }
        </div>
    </div>
</div>
<script type="text/javascript">
    $(document).ready(function () {
    var dateType = @Model.SystemControl.DateType;
    var date;
    var nepDate;
    if(dateType==1) {
        date = $("#currDate").val();
        nepDate = convertToNepali(date);
    } else {
        date = $("#currDate").val();
        date = convertToNepali(date);
        nepDate = date;
    }
    $("#Branch_StartMiti").val(nepDate);
    $("#Branch_DisplayDate").val(date);
    $("#Branch_StartDate").nepNoBackDatePicker();
});
</script>