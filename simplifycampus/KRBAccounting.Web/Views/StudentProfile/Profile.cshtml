@model KRBAccounting.Web.ViewModels.StudentProfile.StudentProfileViewModel
@using KRBAccounting.Service
@{
    Layout = "_Layout.cshtml";
}

<div class="social-box" id="user-profile" style="display: block;">
    <div class="body">
        <div class="row-fluid">
            <div class="span2">
                <div class="row-fluid">
                    <img class="img-polaroid avatar span12" src="@KRBAccounting.Service.UtilityService.GetThumbnailImageByUserId(Model.RegistrationDetail.UserId)">
                </div>
                @if (ViewBag.Name != User.Identity.Name)
                {
                    <p>
                        <a data-id="@Model.RegistrationDetail.UserId" href="#" id="studentMsg" class="btn btn-block btn-success"><i class="icon-envelope-alt"></i>Send message</a>
                    </p>
                }
               
            </div>
            <div class="span10">
                <div class="row-fluid">
                    <div class="span10 text-left" id="user-status">
                        <h3>
                            @Model.RegistrationDetail.User.FullName</h3>
                        <h5>
                            @Model.RegistrationDetail.Studentinfo.PerAdd, @Model.RegistrationDetail.Studentinfo.PerState ,@Model.RegistrationDetail.Studentinfo.PerCountry</h5>
                        <h5>
                            Regno :
                            @Model.RegistrationDetail.Studentinfo.Regno
                        </h5>
                        <h5>
                            <span class="span3">Current Class : @Model.RegistrationDetail.Studentinfo.Class.Description </span><span class="span2">
                                                                                                                                   @if (Model.RegistrationDetail.Section != null)
                                                                                                                                   {
                                                                                                                                       <text>Section : @Model.RegistrationDetail.Section.Description</text>
                                                                                                                                   }</span>
                        </h5>
                        <h5>
                            Roll No. : @Model.RegistrationDetail.RollNo
                        </h5>
                    </div>
                    @if (ViewBag.Name == User.Identity.Name)
                    {
                        <div class="span2">
                            <a id="edit-profile-button" class="btn btn-block btn-primary" href="@Url.Action("Setting")" >
                                Edit Profile</a>
                        </div>
                    }
                </div>
            </div>
        </div>
        <div class="row-fluid">
            <div class="span2">
                @* <div class="social-box" id="friends-list">
                    <div class="header">
                        <h4>
                            Friends</h4>
                    </div>
                    <div class="body">
                        <div class="row-fluid">
                            <div class="span4">
                                <a title="" data-toggle="tooltip" href="#" data-original-title="Yadra Abels">
                                    <img class="img-rounded" alt="User" src="/templates/social/assets/img/people-face/user1_55.jpg">
                                </a>
                            </div>
                            <div class="span4">
                                <a title="" data-toggle="tooltip" href="#" data-original-title="Cesar Mendoza">
                                    <img class="img-rounded" alt="User" src="/templates/social/assets/img/people-face/user2_55.jpg">
                                </a>
                            </div>
                            <div class="span4">
                                <a title="" data-toggle="tooltip" href="#" data-original-title="John Doe">
                                    <img class="img-rounded" alt="User" src="/templates/social/assets/img/people-face/user3_55.jpg">
                                </a>
                            </div>
                        </div>
                        <br>
                        <div class="row-fluid">
                            <div class="span4">
                                <a title="" data-toggle="tooltip" href="#" data-original-title="Tobei Tsumura">
                                    <img class="img-rounded" alt="User" src="/templates/social/assets/img/people-face/user4_55.jpg">
                                </a>
                            </div>
                            <div class="span4">
                                <a title="" data-toggle="tooltip" href="#" data-original-title="Jack Smith">
                                    <img class="img-rounded" alt="User" src="/templates/social/assets/img/people-face/user5_55.jpg">
                                </a>
                            </div>
                            <div class="span4">
                                <a title="" data-toggle="tooltip" href="#" data-original-title="David Street">
                                    <img class="img-rounded" alt="User" src="/templates/social/assets/img/people-face/user6_55.jpg">
                                </a>
                            </div>
                        </div>
                    </div>
                </div>*@
            </div>
            <div class="span10">
                <hr />
                <dl class="dl-horizontal">
                    <dt>Date Of Birth</dt>
                    <dd>
                        @if (Model.RegistrationDetail.Studentinfo.DBO != null)
                        {
                                                       
                            @Convert.ToDateTime(Model.RegistrationDetail.Studentinfo.DBO).ToShortDateString()
                                                       
                        }</dd>
                    <dt>Sex </dt>
                    <dd>
                        @Model.RegistrationDetail.Studentinfo.Sex
                    </dd>
                    <dt>Categroy Name</dt>
                    <dd>@Model.RegistrationDetail.Studentinfo.StudentCategory.Description
                    </dd>
                    <dt>Nationality </dt>
                    <dd>@Model.RegistrationDetail.Studentinfo.Nationality
                    </dd>
                    <dt>Marital Status </dt>
                    <dd>@Model.RegistrationDetail.Studentinfo.MaritialSt
                    </dd>
                    <dt>Religion </dt>
                    <dd>
                        @Model.RegistrationDetail.Studentinfo.Religion
                    </dd>
                    <dt>Height </dt>
                    <dd>
                        @Model.RegistrationDetail.Studentinfo.StHeight
                    </dd>
                    <dt>Weight</dt>
                    <dd>@Model.RegistrationDetail.Studentinfo.StWeight
                    </dd>
                    <dt>Phone No. </dt>
                    <dd>
                        @Model.RegistrationDetail.Studentinfo.Phone
                    </dd>
                    <dt>Email Address </dt>
                    <dd>
                        @Model.RegistrationDetail.Studentinfo.EmailId
                    </dd>
                    <dt>Apply Date </dt>
                    <dd>
                        @if (Model.RegistrationDetail.Studentinfo.ApplyDate != null)
                        {
                            @Convert.ToDateTime(Model.RegistrationDetail.Studentinfo.ApplyDate).ToShortDateString()
                        }
                    </dd>
                </dl>
                <hr/>
                <div class="span6 row">
                    <div class="head">
                        <div class="isw-grid">
                        </div>
                        <h3>
                            Documents</h3>
                        <div class="clear">
                        </div>
                    </div>
                    <div class="block-fluid table-sorting">
                        <table cellpadding="0" cellspacing="0" width="100%" class="table" id="tbl-list">
                            <thead>
                                <tr>
                                    <th>
                                        S.N.
                                    </th>
                            
                                    <th>
                                        Title
                                    </th>
                                    <th>
                                        Description
                                    </th>
                            
                                </tr>
                            </thead>
                            <tbody>
                                @{
                                    int SNo = 1;
                                }
                                @foreach (var item in Model.StudentDocument)
                                {

                                    var url = string.Format("{0}://{1}{2}", Request.Url.Scheme, Request.Url.Authority, Url.Content("~")) +
                                              "Content/AcademicStudentDocs/" + item.DocumentGuid + item.DocumentExt;
                                    <tr>
                                        <td>@SNo
                                        </td>
                                        <td><a href="@url" target="_blank">@item.Title</a>
                                   
                                   
                                        </td>
                                        <td>@item.Description
                                        </td>
                                
                                    </tr>
                                    SNo++;

                                }
                            </tbody>
                        </table>
                    </div>
                </div>
                <div  style="width: auto" id="studentMsgDetail"  class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    
   
                </div>
                @* <table cellpadding="0" cellspacing="0" width="100%" class="listpopup" id="tbl-list"
            style="border-top: 0px; border-bottom: 0px" align="center">
            <tr>
                <td colspan="2" style="border: 0px">
                    <h4 align="center">
                        General Information</h4>
                </td>
            </tr>
            <tr>
                <td colspan="2" style="border: 0px">
                    <h4>
                        Address Details</h4>
                </td>
            </tr>
            <tr>
                <td colspan="2" style="border: 0px">
                    <h5>
                        Permanent Address</h5>
                </td>
            </tr>
            <tr>
                <td style="border: 0px">
                    <div class="control-group">
                        <label class="control-label">
                            Address :
                        </label>@Model.PerAdd</div>
                </td>
                <td style="border: 0px">
                    <div class="control-group">
                        <label class="control-label">
                            Ward No. :</label>
                        @Model.PerWardNo</div>
                </td>
            </tr>
            <tr>
                <td style="border: 0px">
                    <div class="control-group">
                        <label class="control-label">
                            City/Vilcontrol-groupe :</label>
                        @Model.PerCity</div>
                </td>
                <td style="border: 0px">
                    <div class="control-group">
                        <label class="control-label">
                            District :
                        </label>@Model.PerDistrict</div>
                </td>
            </tr>
            <tr>
                <td style="border: 0px">
                    <div class="control-group">
                        <label class="control-label">
                            State/Zone :</label>@Model.PerState</div>
                </td>
                <td style="border: 0px">
                    <div class="control-group">
                        <label class="control-label">
                            Country :</label>@Model.PerCountry</div>
                </td>
            </tr>
            <tr>
                <td style="border: 0px">
                    <div class="control-group">
                        <label class="control-label">
                            Phone No. :</label>
                        @Model.PerPhone</div>
                </td>
                <td style="border: 0px">
                </td>
            </tr>
        </table>
        <table cellpadding="0" cellspacing="0" width="100%" class="listpopup" id="tbl-list"
            style="border-top: 0px; border-bottom: 0px" align="center">
            <tr colspan="2">
                <h5>
                    Temporary Address</h5>
            </tr>
            <tr>
                <td style="border: 0px">
                    <div class="control-group">
                        <label class="control-label">
                            Address:
                        </label>@Model.TmpAdd</div>
                </td>
                <td style="border: 0px">
                    <div class="control-group">
                        <label class="control-label">
                            Ward No. :
                        </label>@Model.TmpWardNo</div>
                </td>
            </tr>
            <tr>
                <td style="border: 0px">
                    <div class="control-group">
                        <label class="control-label">
                            City/Vilcontrol-groupe :</label>
                        @Model.TmpCity</div>
                </td>
                <td style="border: 0px">
                    <div class="control-group">
                        <label class="control-label">
                            District :</label>
                        @Model.TmpDistrict</div>
                </td>
            </tr>
            <tr>
                <td style="border: 0px">
                    <div class="control-group">
                        <label class="control-label">
                            State/Zone :</label>@Model.TmpState</div>
                </td>
                <td style="border: 0px">
                    <div class="control-group">
                        <label class="control-label">
                            Country :</label>@Model.TmpCountry</div>
                </td>
            </tr>
            <tr>
                <td style="border: 0px">
                    <div class="control-group">
                        <label class="control-label">
                            Phone No. :
                        </label>@Model.TmpPhone</div>
                </td>
                <td style="border: 0px">
                </td>
            </tr>
        </table>
        <table cellpadding="0" cellspacing="0" width="100%" class="listpopup" id="tbl-list"
            style="border-top: 0px; border-bottom: 0px" align="center">
            <tr>
                <td colspan="2" style="border: 0px">
                    <h4 align="center">
                        Parent Details</h4>
                </td>
            </tr>
            <tr>
                <td colspan="2" style="border: 0px">
                    <h5>
                        Father's Information</h5>
                </td>
            </tr>
            <tr>
                <td style="border: 0px">
                    <div class="control-group">
                        <label class="control-label">
                            Name :</label>@Model.FName</div>
                </td>
                <td style="border: 0px">
                    <div class="control-group">
                        <label class="control-label">
                            Profession :</label>
                        @Model.FProff</div>
                </td>
            </tr>
            <tr>
                <td style="border: 0px">
                    <div class="control-group">
                        <label class="control-label">
                            Residental Phone No. :</label>@Model.FPhoneRes</div>
                </td>
                <td style="border: 0px">
                    <div class="control-group">
                        <label class="control-label">
                            Mobile :</label>@Model.FMobile</div>
                </td>
            </tr>
            <tr>
                <td style="border: 0px">
                    <div class="control-group">
                        <label class="control-label">
                            Email Address :</label>
                        @Model.FEmail</div>
                </td>
                <td style="border: 0px">
                    <div class="control-group">
                        <label class="control-label">
                            Office :</label>@Model.FOff</div>
                </td>
            </tr>
            <tr>
                <td style="border: 0px">
                    <div class="control-group">
                        <label class="control-label">
                            Address :</label>@Model.FOffAdd</div>
                </td>
                <td style="border: 0px">
                    <div class="control-group">
                        <label class="control-label">
                            Phone :
                        </label>@Model.FPhoneOff</div>
                </td>
            </tr>
        </table>
        <table cellpadding="0" cellspacing="0" width="100%" class="listpopup" id="tbl-list"
            style="border-top: 0px; border-bottom: 0px" align="center">
            <tr>
                <td colspan="2" style="border: 0px">
                    <h5>
                        Mother's Information</h5>
                </td>
            </tr>
            <tr>
                <td style="border: 0px">
                    <div class="control-group">
                        <label class="control-label">
                            Name :</label>@Model.MName</div>
                </td>
                <td style="border: 0px">
                    <div class="control-group">
                        <label class="control-label">
                            Profession :
                        </label>@Model.MOff</div>
                </td>
            </tr>
            <tr>
                <td style="border: 0px">
                    <div class="control-group">
                        <label class="control-label">
                            Residental Phone No. :</label>@Model.MPhoneRes</div>
                </td>
                <td style="border: 0px">
                    <div class="control-group">
                        <label class="control-label">
                            Mobile :</label>@Model.MMobile</div>
                </td>
            </tr>
            <tr>
                <td style="border: 0px">
                    <div class="control-group">
                        <label class="control-label">
                            Email Address :</label>
                        @Model.MEmail</div>
                </td>
                <td style="border: 0px">
                    <div class="control-group">
                        <label class="control-label">
                            Office :</label>@Model.MOff</div>
                </td>
            </tr>
            <tr>
                <td style="border: 0px">
                    <div class="control-group">
                        <label class="control-label">
                            Address :</label>@Model.MOffAdd</div>
                </td>
                <td style="border: 0px">
                    <div class="control-group">
                        <label class="control-label">
                            Phone :</label>
                        @Model.MPhoneOff</div>
                </td>
            </tr>
        </table>
        <table cellpadding="0" cellspacing="0" width="100%" class="listpopup" id="tbl-list"
            style="border-top: 0px; border-bottom: 0px" align="center">
            <tr>
                <td colspan="2" style="border: 0px">
                    <h5>
                        Guardian's Information</h5>
                </td>
            </tr>
            <tr>
                <td style="border: 0px">
                    <div class="control-group">
                        <label class="control-label">
                            Name :</label>@Model.GName</div>
                </td>
                <td style="border: 0px">
                    <div class="control-group">
                        <label class="control-label">
                            Profession :
                        </label>@Model.GProff</div>
                </td>
            </tr>
            <tr>
                <td style="border: 0px">
                    <div class="control-group">
                        <label class="control-label">
                            Relation :</label>@Model.GRelation</div>
                </td>
                <td style="border: 0px">
                    <div class="control-group">
                        <label class="control-label">
                            Residental Phone No. :</label>@Model.MPhoneRes</div>
                </td>
            </tr>
            <tr>
                <td style="border: 0px">
                    <div class="control-group">
                        <label class="control-label">
                            Mobile :</label>@Model.MMobile</div>
                </td>
                <td style="border: 0px">
                    <div class="control-group">
                        <label class="control-label">
                            Email Address :</label>
                        @Model.MEmail</div>
                </td>
            </tr>
            <tr>
                <td style="border: 0px">
                    <div class="control-group">
                        <label class="control-label">
                            Office :</label>@Model.MOff</div>
                </td>
                <td style="border: 0px">
                    <div class="control-group">
                        <label class="control-label">
                            Address :</label>@Model.MOffAdd</div>
                </td>
            </tr>
            <tr>
                <td style="border: 0px">
                    <div class="control-group">
                        <label class="control-label">
                            Phone :
                        </label>@Model.MPhoneOff</div>
                </td>
            </tr>*@
            </div>
        </div>
    </div>
</div>


<script type="text/javascript" language="javascript">


    $('a#studentMsg').live('click', function () {
        $.blockUI();
        var id = $(this).attr("data-id");
        var url = '/StudentProfile/StudentMsg?studentId=' + id;

        getRequest(url);

        return false;
    });

    // $("#studentMsgDetail").modal('toggle');
    function getRequest(url) {
        $.ajax({
            url: url,
            context: document.body,
            success: function (data) {

                $('#studentMsgDetail').modal('show');
                $('#studentMsgDetail').html(data);
                $.unblockUI();

            },
            error: function (err) {



                alert("Error");
            }
        });
    }

    //    $(".btn-submit-form").live("click", function () {
    //        //$(".student-form").submit();
    //    });

    function complete(data) {
        //alert(data.msgCount);
        // alert(data.content);
        if (data.content == "true") {

            $("#count_" + data.userId).text("(" + data.msgCount + ")");
            $("#studentMsgDetail").modal('hide');
            var chat = $.connection.chatHub;
            chat.server.send();
            $.unblockUI();
            GrowlMsg('Sent message Successful');
        }

    }


</script>